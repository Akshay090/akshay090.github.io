{"componentChunkName":"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js","path":"/posts/deeplearning-tutorial-azure/","result":{"data":{"mdx":{"id":"f64d24d9-b1a6-5aab-8d94-d6e27abe9cab","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"pinned\": true,\n  \"title\": \"End to End Deep Learning Tutorial using Azure\",\n  \"tags\": [\"fastai\", \"azure\", \"deeplearning\", \"image-classifier\"],\n  \"date\": \"2020-12-20T00:00:00.000Z\",\n  \"author\": \"Akshay Ashok\",\n  \"featuredImageUrl\": \"https://res.cloudinary.com/akshay090/image/upload/v1598772791/Portfolio_Assets/deeplearningAzure.png\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Vimeo = makeShortcode(\"Vimeo\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h3\", null, \"Learn how to set up your deep learning workspace, build a custom dataset, train and deploy model with continuous deployment using azure pipelines.\"), mdx(\"h3\", null, \"Introduction:\"), mdx(\"p\", null, \"The goal of this article is to set up a deep learning workspace on azure, build and deploy end to end deep learning projects on azure. We will start by building a custom image data set to deploy the model in production. This article is a part of the MSP Developer Stories initiative by the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://studentpartners.microsoft.com\"\n  }), \"Microsoft Student Partners\"), \" (India) program.\"), mdx(\"h3\", null, \"What will be we\\u2019ll be building?\"), mdx(\"p\", null, \"We will build a Pokemon image classifier to classify the awesome starters Pikachu, Charmander, Squirtle, and Bulbasaur.\"), mdx(\"p\", null, \"Live Demo at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://mini-pokedex.azurewebsites.net/\"\n  }), \"mini-pokedex.azurewebsites.net\")), mdx(Vimeo, {\n    vimeoId: \"448258671\",\n    mdxType: \"Vimeo\"\n  }), mdx(\"h3\", null, \"The steps we will follow:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Build custom image dataset using Bing image search API\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Set up our deep learning workspace using azure Data Science VM\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Build and train model in Azure Data Science VM using fast AI.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Build a web app to use our model through API and dockerizing it.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Push Docker image of a web app to azure container registry.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Deploying web app in Linux container VM from an azure container registry.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Setting up continuous deployment using azure pipelines.\"))), mdx(\"h3\", null, \"Note:\"), mdx(\"p\", null, \"Before you start out, make sure you have an account on Azure with an active subscription. If you are a student in STEM, you may use the\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://azure.microsoft.com/en-in/free/students/\"\n  }), \" Azure for Student\"), \"s to get a subscription for free or else you can use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://azure.microsoft.com/en-in/free/\"\n  }), \"Azure free account\"), \".\"), mdx(\"h3\", null, \"Step 1: Building custom image dataset using Bing image search api\"), mdx(\"p\", null, \"We will use the Bing Image Search API, go to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://azure.microsoft.com/en-in/services/cognitive-services/bing-image-search-api/\"\n  }), \"Bing Image Search API page\"), \" and click on Try Bing Image Search and sign in. Then activate your service by filling out the required fields like this:\"), mdx(\"p\", null, \"Give it a name, I named it \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"dataset-search-API\")), \", you can try anything different based on its availability. Choose your appropriate subscription. For the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"pricing tier, F1\")), \" will be appropriate as it provides 1,000 transactions free per month. Create a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"resource group Search-API\")), \", you can name it anything, but an important point to keep in mind when working in Azure is to give appropriate names to a resource group, as you would later be using the resource group name to keep track of expenses and delete resources. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"Select a location\")), \" for the resource group, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"accepting the terms\")), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"hit create\")), \". Then \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"wait \")), \"for your resource to be created. Once it\\u2019s created \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"click go-to resource\")), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/2694/1*JKZ2BY-vFiD32FiVy1yMOw.png\",\n    \"alt\": \"Creating a bing image search resource\"\n  })), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Creating a bing image search resource\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"You would find the API key for your bing image search resource page.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Then git clone this repo: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/image-dataset-bing-api\"\n  }), \"image-dataset-bing-API\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"open it in VS Code and create a new file named .env and paste contents of file \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/image-dataset-bing-api/blob/master/.env.example\"\n  }), \".env.example\"), \" into it.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Then copy your bing image search API key from your resource page and paste it in the .env file at the appropriate place.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create a virtual environment with: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"python -m venv venv\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Activate it using : \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"venv\\\\Scripts\\\\activate.bat\")), \" (in windows) or \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"source venv/bin/activate\")), \" (in Linux)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Install dependencies using: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"pip install -r requirements.txt\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"User the script like python search_bing_api.py \\u2014 query \\u201CBulbasaur\\u201D\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Repeat the above process for Pikachu, Charmander, Squirtle.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now you have a folder called dataset with folders with images of each pokemon.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Just go through the images and delete the ones with you feel are not relevant.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Add the folder (dataset) to a new git repo as I did here \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/pokemon-image-dataset\"\n  }), \"pokemon-image-dataset\")))), mdx(\"p\", null, \"Now you have a repo in GitHub with custom image Lets start with the next step:\"), mdx(\"h3\", null, \"Step 2: Set up our deep learning workspace using azure Data Science VM\"), mdx(\"p\", null, \"We will set up an NC6 Promo which is a Linux VM with 1 x K80 NVIDIA GPU (1/2 Physical Card) which is 12 GB GPU and six CPU cores.\"), mdx(\"p\", null, \"You can learn more about the VM \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://azure.microsoft.com/en-us/pricing/details/virtual-machines/linux/\"\n  }), \"here\"), \".\"), mdx(\"p\", null, \"If you need a detailed installation procedure you can refer \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://course.fast.ai/start_azure.html\"\n  }), \"fast ai azure page\"), \" else you can follow below instructions.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"We will use the template created by the fast ai team to set up the VM: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://aka.ms/dsvm/fastai\"\n  }), \"Click this link\"), \" to take you to the VM creation page.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"new resource group\"), \" named \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"DSVM\"), \", set the location as your preference.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"setup \"), \"admin \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"username\"), \"(make lowercase or Jupyter Hub login will fail with 500 Internal Server Error), and set \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"password\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Set appropriate VM name, I named it \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"DSVM-DL\")), \" and select NC6 Promo in VM size\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select accept terms and click purchase.\"))), mdx(\"p\", null, \"Now wait until the resource is created. Click the notification icon to know if it\\u2019s created and click go to resource group when it\\u2019s created.\"), mdx(\"p\", null, \"In the resource, group page click on the Virtual Machine with the name you gave it above. And click your public IP as in the image below\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/2732/1*vDRc82M04qGkVmEMer9Mgg.png\",\n    \"alt\": \"click-the-ip-to-set-it-to-static\"\n  })), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"click-the-ip-to-set-it-to-static\")), mdx(\"p\", null, \"Clicking the IP will take you to a Configuration for your public IP, now change the assignment to Static from dynamic, and you can also set a DNS name label.Due to this step, your VM IP will not change after the restart. The page will look like below image\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/2732/1*ZbAaq1gmUXHvvU6axQbOkA.png\",\n    \"alt\": \"set static IP\"\n  })), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"set static IP\")), mdx(\"p\", null, \"Now we have completed setting up the DSVM, let's move to next step\"), mdx(\"h3\", null, \"Step 3: Build and train model in Azure Data Science VM using fast AI.\"), mdx(\"p\", null, \"As you have set up a DSVM with GPU you can \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"either\"), \" with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"azure notebooks\"), \" OR \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"use by ssh into it DSVM and use\"), \". I recommend the second method as it gives you more flexibility. First, let me show you the azure notebooks method and then we will start using the VM with SSH.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Using Azure DSVM with azure notebooks.\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Go to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://notebooks.azure.com/\"\n  }), \"notebooks.azure.com\"), \", sign in and create a user id.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Then click My Notebooks and Create a New Notebook.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now to use your VM with GPU in an azure notebook, change the option Run on Free Compute to Run on Direct Compute.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now you can begin using the azure notebook on DSVM with GPU.\"))), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/2512/1*vbpCMRxDQbuYJHil5i9ROw.png\",\n    \"alt\": \"The screen on the change compute step\"\n  })), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"The screen on the change compute step\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SSH into the DSVM to use from there\")), mdx(\"p\", null, \"This method gives you more flexibility than the above one. For \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"windows users,\"), \" I recommend \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"using wsl\"), \" before this step, just \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"type wsl into the current shell\"), \" to start it.\"), mdx(\"p\", null, \"To connect to your VM use :\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"ssh <username>@<VM Public IP> and enter password\\n\")), mdx(\"p\", null, \"Setup Jupyter Notebook and start Jupyter with the commands below\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"jupyter notebook password\\n    // Enter password:\\n    // Verify password:\\n\\n    jupyter notebook --port 8888\\n\")), mdx(\"p\", null, \"Create a ssh tunnel to localhost:9999 from VM\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"ssh -L 9999:127.0.0.1:8888 <username>@<VM Public IP>\\n\")), mdx(\"p\", null, \"Now go to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:9999/\"\n  }), \"localhost:9999\"), \" to use jupyter notebook, enter a password to start using it.\"), mdx(\"p\", null, \"You can create a folder and make a notebook called pokedex-dl and start working on it.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note: \"), \"Please refer to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/Pokedex-DL/blob/master/pokedex.ipynb\"\n  }), \"pokedex.ipynb\"), \" to train and export your model to the outputs folder. I\\u2019m have explained every step in the notebook if you have any queries regarding it comment below.\"), mdx(\"p\", null, \"After following \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/Pokedex-DL/blob/master/pokedex.ipynb\"\n  }), \"pokedex.ipynb\"), \" you would have a outputs folder with the model named poke\", \"*\", \"predictor\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"resnet34, download this from the Jupyter notebook. \", \"*\", \"*\", \"_\", \"Upload the model to dropbox\", mdx(\"strong\", {\n    parentName: \"em\"\n  }, \"*\", \" and \"), \"_\", \"get the sharable link\"), \"*\", \"*\", \".\"), mdx(\"h3\", null, \"Step 4: Build a web app to use our model through API and dockerizing it.\"), mdx(\"p\", null, \"First git clone : \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/pokedex-deploy\"\n  }), \"pokedex-deploy\"), \" locally. Replace the dropbox link in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/pokedex-deploy/blob/master/app/server.py\"\n  }), \"server.py\"), \" with your sharable link. You should also change \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/pokedex-deploy/blob/master/app/view/index.html\"\n  }), \"index.html\"), \" as per your preference.\"), mdx(\"p\", null, \"You can run \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Akshay090/pokedex-deploy\"\n  }), \"pokedex-deploy\"), \" in docker with\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"docker build -t poke-image . && docker run --rm -it -p 5000:5000 poke-image\\n\")), mdx(\"p\", null, \"You can also replace poke-imagewith a image name you like.\"), mdx(\"p\", null, \"Now as we have our docker image ready we can move to next step\"), mdx(\"h3\", null, \"Step 5: Push Docker image of web app to azure container registry.\"), mdx(\"p\", null, \"First we need to setup azure CLI, please refer \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest\"\n  }), \"docs.microsoft.com/en-us/cli/azure/install-azure\"), \" for it. Tip for Windows users:- Try \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://chocolatey.org/\"\n  }), \"Chocolatey\"), \" you can refer \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://chocolatey.org/packages/azure-cli\"\n  }), \"chocolatey.org/packages/azure-cli\"), \" for installation.\"), mdx(\"p\", null, \"Don\\u2019t forget az login\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"Now we will create a private container registry using Azure CLI\")), \". Container registry is basically a GitHub for docker images, docker hub is a public container registry.\"), mdx(\"p\", null, \"If you need more details of below steps please refer \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.microsoft.com/en-us/azure/container-registry/container-registry-get-started-azure-cli\"\n  }), \"container-registry-get-started-azure-CLI\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"# create a resource group named container_registry_rg\\naz group create - name container_registry_rg - location eastus\\n\\n# create container registry named pokeRegistry\\naz acr create --resource-group container_registry_rg --name pokeRegistry --sku Basic\\n\\n# Login to your container registry\\naz acr login --name pokeregistry\\n\\n# tag your container registry in following format,\\ndocker tag poke-image pokeregistry.azurecr.io/poke-image:v1\\n\\n# Push image to container registry, it will take a while\\ndocker push pokeregistry.azurecr.io/poke-image:v1\\n\\n# You can verify if it's uploaded by\\naz acr repository list --name pokeregistry --output table\\n\\n# Important Please don't forget this,important for deployment\\naz acr update -n pokeregistry --admin-enabled true\\n\")), mdx(\"h3\", null, \"Step 6: Deploying web app in Linux container VM from an azure container registry.\"), mdx(\"p\", null, \"Go to Azure at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://portal.azure.com/\"\n  }), \"portal.azure.com\"), \". and choose to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create a resource\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Web\"), \", then choose \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Web App for Containers \"), \"or you can directly \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://portal.azure.com/#blade/Microsoft_Azure_Marketplace/MarketplaceOffersBlade/selectedMenuItemId/home/searchQuery/Web%20App%20for%20Containers\"\n  }), \"click this link to go there.\")), mdx(\"p\", null, \"Hit create and in the page fill the details and create a new resource group. Please \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"change the\"), \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"Sku and size\"), \" default option: B1 Basic \"), \"in Dev/Test as it will be enough for basic needs. Don\\u2019t forget to set the image source as Azure Container Registry in the Docker tab.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/2732/1*9aU5ZWEilccTHRo2FbWTkQ.gif\",\n    \"alt\": \"Deploying with Web App for containers\"\n  })), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Deploying with Web App for containers\")), mdx(\"p\", null, \"Once it\\u2019s completed click on goto resource and you can find your web app URL at \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"URL\")), mdx(\"p\", null, \"Congrats now you have deployed your Deep Learning model \\uD83D\\uDE80\"), mdx(\"h3\", null, \"Step 7: Setting up continuous deployment using azure pipelines.\"), mdx(\"p\", null, \"Now on your web app page in azure, you will find a thing called \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Deployment Center, \"), \"this is one of the coolest things in azure. It will help us in creating a CI/CD pipeline in Azure.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click deployment center\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select Source code location (Github) and Authorize it\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Select your repository\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"It will automatically detect the docker file, just click next\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create Azure DevOps organization and select use Existing in container registry, Click Done\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Click release pipeline in after it\\u2019s the finished page\"))), mdx(\"p\", null, \"Above steps can be seen in the gif below:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/2732/1*nz18C1nlhCiWwovJnIzgEw.gif\",\n    \"alt\": \"deployment center azure\"\n  })), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"deployment center azure\")), mdx(\"p\", null, \"Now you must be in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://dev.azure.com\"\n  }), \"dev.azure.com\"), \" if not go to it and find your project inside your organization in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://dev.azure.com\"\n  }), \"dev.azure.com\"), \".\"), mdx(\"p\", null, \"With the current set up we already have a CI/CD pipeline set up for our project, thanks to Deployment Center.\"), mdx(\"p\", null, \"If you make any changes to your code and push it to GitHub it will build a new image, add it to your container registry and deploy.\"), mdx(\"p\", null, \"But we have two problems to address now\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"just think that you keep making changes to your code and push it, your container registry(10 GB) storage will be used by all those un unused images\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"If you edit your Readme.md it will build a new image and deploy it.\"))), mdx(\"p\", null, \"To solve both problems go to your project page inside your organization in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://dev.azure.com\"\n  }), \"dev.azure.com\"), \" and follow along with the below video.\"), mdx(Vimeo, {\n    vimeoId: \"448258645\",\n    mdxType: \"Vimeo\"\n  }), mdx(\"p\", null, \"Wow. Congratulations if you reached here \\uD83C\\uDF89. If you have any doubts, post them in the comments section.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Learn how to set up your deep learning workspace, build a custom dataset, train and deploy model with continuous deployment using azure…","timeToRead":6,"wordCount":{"words":1690},"frontmatter":{"title":"End to End Deep Learning Tutorial using Azure","tags":["fastai","azure","deeplearning","image-classifier"],"date":"2020-12-20T00:00:00.000Z","dateModified":null,"author":"Akshay Ashok","status":null,"isPrivate":null,"url":null,"misc":null,"pinned":true,"featuredImage":null,"featuredImageUrl":"https://res.cloudinary.com/akshay090/image/upload/v1598772791/Portfolio_Assets/deeplearningAzure.png","embeddedImages":null,"embeddedImageUrls":null},"fields":{"slug":"/posts/deeplearning-tutorial-azure/","owner":"source","parent":"posts"}}},"pageContext":{"id":"f64d24d9-b1a6-5aab-8d94-d6e27abe9cab","prev":{"frontmatter":{"title":"all-front-matter","status":null},"fields":{"slug":"/posts/all-frontmatter/"}},"next":{"frontmatter":{"title":"action-echo","status":null},"fields":{"slug":"/projects/action-echo/"}},"parent":"posts"}},"staticQueryHashes":["1095393795","1402550803","1469902088"]}