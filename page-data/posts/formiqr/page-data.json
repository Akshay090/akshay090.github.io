{"componentChunkName":"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js","path":"/posts/formiqr/","result":{"data":{"mdx":{"id":"ceaa02e5-0669-504b-950a-ab6af26a69ea","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How to build formiQR - Event management with Google Forms and Cloud Function\",\n  \"tags\": [\"email\", \"Firebase\", \"cloud functions\"],\n  \"date\": \"2019-04-23T00:00:00.000Z\",\n  \"author\": \"Akshay Ashok\",\n  \"featuredImageUrl\": \"https://res.cloudinary.com/akshay090/image/upload/v1597561185/Portfolio_Assets/formiqr_suvqqh.jpg\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In this post I would go through what is formiQR and how to build formiQR.\"), mdx(\"p\", null, \"First of all what is formiQR and what problem it solves ?\"), mdx(\"p\", null, \"formiQR aims to leverages google form with help of firebase cloud function to be a complete event management platform.\"), mdx(\"p\", null, \"Initially I developed formiQR to help out a friend with an event, named MakerFest Vadodara. They needed a system, in which a user fills in the google form and then receive a personalized QR code, which they can scan at the event to conform their presence and also get other statistical data like how many people are present in the event, what age group they are, gender, etc.\"), mdx(\"p\", null, \"Now,after successfully completing this project, I thought of organizing all the code and making a proper repo, as this might be helpful to someone.\"), mdx(\"p\", null, \"So the proper git repo of the end product is at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Club-DevBytes/formiQR\"\n  }), \"Club-DevBytes/formiQR\"), \" and this is the blog post explaining it step by step.\"), mdx(\"p\", null, \"I plan to break down this into 4 parts:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Sending data filled in google form to firebase and using triggers in google sheets\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/posts/formiqr-part2-email-cloud-function\"\n  }), \"Sending personalized email from cloud function\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/posts/formiqr-part3-counter-cloud-function\"\n  }), \"A cloud function to implement a counter\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/posts/formiqr-part4-appQR-to-firebase\"\n  }), \"Android app to scan QR and update data in firebase and display it\"))), mdx(\"h1\", null, \"So lets begin with Part 1\"), mdx(\"h2\", null, \"Sending data filled in google form to firebase and using triggers in google sheets\"), mdx(\"p\", null, \"We need to send the data in the google sheet linked to our google form to Firebase, for this we would be using Google Apps Script, which is a scripting language for light-weight application development in the G Suite platform.\"), mdx(\"p\", null, \"To do that lets switch to the Tools > Script editor in the top bar\"), mdx(\"p\", null, \"Then you need to add the following code in the Code.gs\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"//Code.gs\\nfunction writeDataToFirebase() {\\n    var firebaseUrl = \\\"https://makerqr.firebaseio.com replace this with your own\\\";\\n    var secret = \\\"the firebase database secret here\\\";\\n    var base = FirebaseApp.getDatabaseByUrl(firebaseUrl, secret);\\n    var mySheet = SpreadsheetApp.openById(\\\"the id of your spreadsheet\\\");\\n    var dataSheet = mySheet.getSheets()[1];\\n    var lastRow = mySheet.getLastRow();\\n    var lastColumn = mySheet.getLastColumn();\\n    var data = mySheet.getSheetValues(1, 1, lastRow, lastColumn);\\n    var dataToImport = {};\\n    for (var i = 1; i < data.length; i++) {\\n        dataToImport[i] = {\\n            name: data[i][1],\\n            email: data[i][2],\\n            gender: data[i][3],\\n            age: data[i][4]\\n        };\\n    }\\n    base.setData(\\\"maker\\\", dataToImport);\\n}\\nfunction addNewData() {\\n    writeDataToFirebase();\\n}\\n\\n\")), mdx(\"p\", null, \"The important details which need to be added in above code are:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"FirebaseUrl and database secret, we will get it in next part\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Your spreadsheet ID, which can be found in the url of the spreadsheet, as \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://docs.google.com/spreadsheets/d/your-spreadsheetID/edit\"\n  }), \"https://docs.google.com/spreadsheets/d/your-spreadsheetID/edit\"), \", you need to place this in the openById part of code.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Adding the Firebase App Library to send the data to firebase, for this go to Resources > Libraries > paste MYeP8ZEEt1ylVDxS7uyg9plDOcoke7-2l in add library and add it. Select version 30 and you are done.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The dataToImport json object, contains the are the coloums in spread sheet which you really care, with the column header, you can select a particular column form it no as in data\", \"[i][1]\", \" and so on.\")), mdx(\"p\", null, \"Now lets create a firebase project, so lets go to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://console.firebase.google.com\"\n  }), \"https://console.firebase.google.com\"), \" and add project with an appropriate name.\\nNow click Database in the side Nav bar, and scroll down to Realtime Database and click create database(for now select test mode).\"), mdx(\"p\", null, \"Now you can get your Firebase url form the page,\\n\", mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://res.cloudinary.com/akshay090/image/upload/v1597561185/Portfolio_Assets/formiqr_suvqqh.jpg\",\n    \"alt\": \"firebase url image, if broken then inform me\"\n  }))), mdx(\"p\", null, \"Finally the last part, the database secret, for that\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"click on the settings/cog wheel icon next to your project name at the top of the new Firebase Console\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Click Project settings\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Click on the Service Accounts tab\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Click on Database Secrets\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Hover over the non-displayed secret and click Show\")), mdx(\"p\", null, \"Paste FirebaseUrl and database secret in the appropriate place in the code.gs and save it.\"), mdx(\"p\", null, \"Try to run the addNewData function by selecting in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Select function\"), \" and click the Run button beside it.\\nHave a look at firebase Realtime Database and all those data should be there.\"), mdx(\"h2\", null, \"Adding trigger to google sheets\"), mdx(\"p\", null, \"Now we need a method where this function should run automatically on form submit.\\nThat's where Triggers come handy, to set a trigger onSubmit follow the steps,\\nIn the Script Editor:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Choose Edit > Current project's triggers. You see a panel with the message No triggers set up. Click here to add one now.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Click the link.\\nUnder Run, select the addNewData function which we want to be executed by the trigger. (That's onFormSubmit(), in this case.)\\nUnder Events, select From Spreadsheet.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"From the next drop-down list, select On form submit.\\nClick Save.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"From this point on, the function will be triggered whenever a form is submitted to the spreadsheet.\")), mdx(\"p\", null, \"If you plan to share your script, each recipient will need to repeat these steps.\"), mdx(\"p\", null, \"Finally this is complete, now your data would be added to firebase on form submission.\"), mdx(\"p\", null, \"You can even add a SYNC button in your google sheets to run addNewData function \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://stackoverflow.com/a/6966272\"\n  }), \"refer this link\"), \". This might come handy when you manually enter data to sheets, or need to sync data to firebase, when you delete it there, during the testing phase.\"), mdx(\"p\", null, \"See you in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/posts/formiqr-part2-email-cloud-function\"\n  }), \"Part 2\"), \" where we will be discussing\\nSending personalized email from cloud function.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"In this post I would go through what is formiQR and how to build formiQR. First of all what is formiQR and what problem it solves ? formiQRâ€¦","timeToRead":3,"wordCount":{"words":778},"frontmatter":{"title":"How to build formiQR - Event management with Google Forms and Cloud Function","tags":["email","Firebase","cloud functions"],"date":"2019-04-23T00:00:00.000Z","dateModified":null,"author":"Akshay Ashok","status":null,"isPrivate":null,"url":null,"misc":null,"pinned":null,"featuredImage":null,"featuredImageUrl":"https://res.cloudinary.com/akshay090/image/upload/v1597561185/Portfolio_Assets/formiqr_suvqqh.jpg","embeddedImages":null,"embeddedImageUrls":null},"fields":{"slug":"/posts/formiqr/","owner":"source","parent":"posts"}}},"pageContext":{"id":"ceaa02e5-0669-504b-950a-ab6af26a69ea","prev":{"frontmatter":{"title":"Break the chain - SMS chatbot for awareness in times of COVID-19","status":null},"fields":{"slug":"/posts/break-the-chain/"}},"next":{"frontmatter":{"title":"A cloud function to implement a counter","status":null},"fields":{"slug":"/posts/formiqr-part3-counter-cloud-function/"}},"parent":"posts"}},"staticQueryHashes":["1095393795","1402550803","1469902088"]}