<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.fa8a83bcf512d4bdae1c.css">.annotationLayer section{position:absolute}.annotationLayer .buttonWidgetAnnotation.pushButton>a,.annotationLayer .linkAnnotation>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}.annotationLayer .buttonWidgetAnnotation.pushButton>a:hover,.annotationLayer .linkAnnotation>a:hover{opacity:.2;background:#ff0;box-shadow:0 2px 10px #ff0}.annotationLayer .textAnnotation img{position:absolute;cursor:pointer}.annotationLayer .buttonWidgetAnnotation.checkBox input,.annotationLayer .buttonWidgetAnnotation.radioButton input,.annotationLayer .choiceWidgetAnnotation select,.annotationLayer .textWidgetAnnotation input,.annotationLayer .textWidgetAnnotation textarea{background-color:rgba(0,54,255,.13);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}.annotationLayer .choiceWidgetAnnotation select option{padding:0}.annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}.annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}.annotationLayer .buttonWidgetAnnotation.checkBox input[disabled],.annotationLayer .buttonWidgetAnnotation.radioButton input[disabled],.annotationLayer .choiceWidgetAnnotation select[disabled],.annotationLayer .textWidgetAnnotation input[disabled],.annotationLayer .textWidgetAnnotation textarea[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}.annotationLayer .buttonWidgetAnnotation.checkBox input:hover,.annotationLayer .buttonWidgetAnnotation.radioButton input:hover,.annotationLayer .choiceWidgetAnnotation select:hover,.annotationLayer .textWidgetAnnotation input:hover,.annotationLayer .textWidgetAnnotation textarea:hover{border:1px solid #000}.annotationLayer .choiceWidgetAnnotation select:focus,.annotationLayer .textWidgetAnnotation input:focus,.annotationLayer .textWidgetAnnotation textarea:focus{background:none;border:1px solid transparent}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:"";display:block;position:absolute}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{height:80%;left:45%;width:1px}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}.annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}.annotationLayer .textWidgetAnnotation input.comb:focus{width:115%}.annotationLayer .buttonWidgetAnnotation.checkBox input,.annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}.annotationLayer .popupWrapper{position:absolute;width:20em}.annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;word-wrap:break-word}.annotationLayer .popup>*{font-size:9px}.annotationLayer .popup h1{display:inline-block}.annotationLayer .popup span{display:inline-block;margin-left:5px}.annotationLayer .popup p{border-top:1px solid #333;margin-top:2px;padding-top:2px}.annotationLayer .caretAnnotation,.annotationLayer .circleAnnotation svg ellipse,.annotationLayer .fileAttachmentAnnotation,.annotationLayer .freeTextAnnotation,.annotationLayer .highlightAnnotation,.annotationLayer .inkAnnotation svg polyline,.annotationLayer .lineAnnotation svg line,.annotationLayer .polygonAnnotation svg polygon,.annotationLayer .polylineAnnotation svg polyline,.annotationLayer .squareAnnotation svg rect,.annotationLayer .squigglyAnnotation,.annotationLayer .stampAnnotation,.annotationLayer .strikeoutAnnotation,.annotationLayer .underlineAnnotation{cursor:pointer}</style><meta name="generator" content="Gatsby 2.24.37"/><title data-react-helmet="true">Akshay Ashok | Sending personalized email with dynamic QR from cloud function</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="https://akshay-ashok.now.sh/images/favicon-16x16.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="https://akshay-ashok.now.sh/images/favicon-32x32.png"/><meta data-react-helmet="true" name="description" content="This is the second part of the series named Building formiQR. By following the previous article, you may have a similar structure of…"/><meta data-react-helmet="true" name="image" content="https://akshay-ashok.now.sh/https://akshay-ashok.now.sh/images/akshay-open-graph-image.jpg"/><meta data-react-helmet="true" name="image:alt" content="This is the second part of the series named Building formiQR. By following the previous article, you may have a similar structure of…"/><meta data-react-helmet="true" name="gatsby-theme" content="@pauliescanlon/gatsby-theme-terminal"/><meta data-react-helmet="true" name="keywords" content="email, Firebase, cloud functions"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Akshay Ashok | Sending personalized email with dynamic QR from cloud function"/><meta data-react-helmet="true" property="og:url" content="https://akshay-ashok.now.sh/posts/formiqr-part2-email-cloud-function/"/><meta data-react-helmet="true" property="og:description" content="This is the second part of the series named Building formiQR. By following the previous article, you may have a similar structure of…"/><meta data-react-helmet="true" property="og:image" content="https://akshay-ashok.now.sh/https://akshay-ashok.now.sh/images/akshay-open-graph-image.jpg"/><meta data-react-helmet="true" property="og:image:alt" content="This is the second part of the series named Building formiQR. By following the previous article, you may have a similar structure of…"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Akshay Ashok | Sending personalized email with dynamic QR from cloud function"/><meta data-react-helmet="true" name="twitter:url" content="https://akshay-ashok.now.sh/posts/formiqr-part2-email-cloud-function/"/><meta data-react-helmet="true" name="twitter:description" content="This is the second part of the series named Building formiQR. By following the previous article, you may have a similar structure of…"/><meta data-react-helmet="true" name="twitter:image" content="https://akshay-ashok.now.sh/https://akshay-ashok.now.sh/images/akshay-open-graph-image.jpg"/><meta data-react-helmet="true" name="twitter:image:alt" content="This is the second part of the series named Building formiQR. By following the previous article, you may have a similar structure of…"/><link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-32da1d79b040c17693e3.js"/><link as="script" rel="preload" href="/framework-376edee25eb5f5cd8260.js"/><link as="script" rel="preload" href="/styles-e0de8ac04609cf01adef.js"/><link as="script" rel="preload" href="/2b7b2d2a-7b40e02f09460fb8e527.js"/><link as="script" rel="preload" href="/app-18a21ce20bb33c517fa8.js"/><link as="script" rel="preload" href="/681fe5fc8c357cbae480dae1928d6d5b271c5b15-8e275088e2da301790d2.js"/><link as="script" rel="preload" href="/component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js-83fe16a84aa019894e6a.js"/><link as="fetch" rel="preload" href="/page-data/posts/formiqr-part2-email-cloud-function/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1095393795.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1402550803.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1469902088.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="dazlhy">body{color:var(--theme-ui-colors-text,#FFFFFF);background-color:var(--theme-ui-colors-background,#1d2224);}</style><style data-emotion-css="1xn9654">*{box-sizing:border-box;}body{margin:0;font-family:Inconsolata,monospace;font-weight:400;font-size:16px;line-height:1.75;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="avzudz">.css-avzudz{box-sizing:border-box;margin:0;min-width:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:var(--theme-ui-colors-background,#1d2224);border-bottom:1px solid var(--theme-ui-colors-surface,#2d3831);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:48px;margin-left:0;overflow:hidden;position:fixed;padding-left:16px;padding-right:16px;width:100%;z-index:997;}@media screen and (min-width:40em){.css-avzudz{margin-left:0;padding-left:32px;padding-right:32px;width:100%;}}@media screen and (min-width:52em){.css-avzudz{margin-left:0;width:100%;}}@media screen and (min-width:64em){.css-avzudz{margin-left:200px;width:calc(100% - 200px);}}</style><header class="css-avzudz"><style data-emotion-css="144mmht">.css-144mmht{box-sizing:border-box;margin:0;min-width:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media screen and (min-width:40em){.css-144mmht{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media screen and (min-width:52em){.css-144mmht{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media screen and (min-width:64em){.css-144mmht{display:none;}}</style><div class="css-144mmht"><a href="/"><style data-emotion-css="19lo1oj">.css-19lo1oj{height:25px;overflow:hidden;}</style><div class="css-19lo1oj"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 25" width="96" height="25"><g><style data-emotion-css="1phxv3p">.css-1phxv3p{fill:var(--theme-ui-colors-success,#58e6d9);}</style><path d="M2.6,12.5c0-5.1,4.2-9.4,9.4-9.4l0,0V0.5c-3,0-5.6,1-7.8,2.9c-5,4.4-5.5,11.9-1.2,16.9l2-1.7 C3.5,17,2.6,14.8,2.6,12.5z" class="css-1phxv3p"></path><style data-emotion-css="2likdo">.css-2likdo{fill:var(--theme-ui-colors-secondary,#c39eff);}</style><path d="M12,21.9c-2.8,0-5.4-1.2-7.1-3.2l-2,1.7c0.4,0.5,0.9,0.9,1.4,1.3c5,4.3,12.6,3.6,16.8-1.5l-2-1.7 C17.4,20.6,14.8,21.9,12,21.9z" class="css-2likdo"></path><style data-emotion-css="15l7r3y">.css-15l7r3y{fill:var(--theme-ui-colors-primary,#f056c7);}</style><path d="M12,0.5v2.6c5.1,0,9.4,4.2,9.4,9.4c0,2.3-0.8,4.4-2.2,6l2,1.7c1.9-2.3,2.8-4.7,2.8-7.7 C23.9,5.9,18.6,0.5,12,0.5z" class="css-15l7r3y"></path><style data-emotion-css="1ovw312">.css-1ovw312{fill:var(--theme-ui-colors-text,#FFFFFF);}</style><path d="M13.052 14.008H10.094L9.518 16H8.102L10.736 7.72H12.464L15.104 16H13.628L13.052 14.008ZM10.382 12.934H12.758L11.576 8.8L10.382 12.934Z" class="css-1ovw312"></path></g><g><path d="M37.736 14.344H33.792L33.024 17H31.136L34.648 5.96H36.952L40.472 17H38.504L37.736 14.344ZM34.176 12.912H37.344L35.768 7.4L34.176 12.912Z" class="css-1ovw312"></path><path d="M44.272 4.96V17H42.48V5.16L44.272 4.96ZM49.864 8.552L46.448 12.328L50.224 17H48.032L44.4 12.376L47.776 8.552H49.864Z" class="css-1ovw312"></path><path d="M54.496 15.84C55.056 15.84 55.5013 15.7413 55.832 15.544C56.1627 15.3413 56.328 15.064 56.328 14.712C56.328 14.4827 56.28 14.288 56.184 14.128C56.088 13.968 55.896 13.8187 55.608 13.68C55.32 13.5413 54.8827 13.3973 54.296 13.248C53.7413 13.104 53.2533 12.9333 52.832 12.736C52.416 12.5387 52.0933 12.2827 51.864 11.968C51.6347 11.6533 51.52 11.248 51.52 10.752C51.52 10.0267 51.8213 9.44267 52.424 9C53.032 8.552 53.856 8.328 54.896 8.328C55.6053 8.328 56.224 8.42133 56.752 8.608C57.28 8.79467 57.7307 9.02667 58.104 9.304L57.352 10.432C57.0213 10.2133 56.6587 10.0347 56.264 9.896C55.8747 9.75733 55.4347 9.688 54.944 9.688C54.3733 9.688 53.9627 9.77333 53.712 9.944C53.4667 10.1147 53.344 10.3413 53.344 10.624C53.344 10.8373 53.4053 11.0133 53.528 11.152C53.656 11.2907 53.8747 11.4213 54.184 11.544C54.4933 11.6667 54.9307 11.8053 55.496 11.96C56.0453 12.1093 56.5227 12.2853 56.928 12.488C57.3387 12.6907 57.656 12.96 57.88 13.296C58.1093 13.6267 58.224 14.0587 58.224 14.592C58.224 15.2 58.048 15.6987 57.696 16.088C57.344 16.472 56.8853 16.7573 56.32 16.944C55.7547 17.1253 55.1467 17.216 54.496 17.216C53.712 17.216 53.0347 17.104 52.464 16.88C51.8933 16.6507 51.4133 16.3653 51.024 16.024L51.976 14.936C52.3067 15.2027 52.6853 15.4213 53.112 15.592C53.5387 15.7573 54 15.84 54.496 15.84Z" class="css-1ovw312"></path><path d="M62.216 4.984V9.584C62.5573 9.168 62.9547 8.856 63.408 8.648C63.8667 8.43467 64.3413 8.328 64.832 8.328C65.6267 8.328 66.2187 8.54933 66.608 8.992C66.9973 9.43467 67.192 10.0507 67.192 10.84V17H65.4V11.12C65.4 10.6133 65.304 10.2507 65.112 10.032C64.92 9.808 64.6107 9.696 64.184 9.696C63.784 9.696 63.4133 9.82667 63.072 10.088C62.7307 10.344 62.4453 10.6347 62.216 10.96V17H60.424V5.176L62.216 4.984Z" class="css-1ovw312"></path><path d="M76.88 14.928C76.88 15.264 76.9307 15.5067 77.032 15.656C77.1333 15.8053 77.296 15.9173 77.52 15.992L77.12 17.208C76.704 17.16 76.344 17.0453 76.04 16.864C75.7413 16.6827 75.5173 16.408 75.368 16.04C75.0587 16.4347 74.6667 16.7307 74.192 16.928C73.7173 17.12 73.2107 17.216 72.672 17.216C71.8133 17.216 71.136 16.976 70.64 16.496C70.144 16.0107 69.896 15.376 69.896 14.592C69.896 13.7013 70.2427 13.016 70.936 12.536C71.6293 12.056 72.6213 11.816 73.912 11.816H75.12V11.264C75.12 10.7147 74.9547 10.3227 74.624 10.088C74.2933 9.848 73.832 9.728 73.24 9.728C72.9627 9.728 72.6267 9.76533 72.232 9.84C71.8373 9.90933 71.424 10.0187 70.992 10.168L70.552 8.904C71.08 8.70667 71.5973 8.56267 72.104 8.472C72.6107 8.376 73.08 8.328 73.512 8.328C74.6427 8.328 75.4853 8.57867 76.04 9.08C76.6 9.58133 76.88 10.2747 76.88 11.16V14.928ZM73.216 15.896C73.5787 15.896 73.9333 15.8 74.28 15.608C74.6267 15.416 74.9067 15.1467 75.12 14.8V12.936H74.128C73.2853 12.936 72.6827 13.0773 72.32 13.36C71.9573 13.6373 71.776 14.0213 71.776 14.512C71.776 15.4347 72.256 15.896 73.216 15.896Z" class="css-1ovw312"></path><path d="M85.816 8.552L82.904 17.032C82.6853 17.672 82.4053 18.2373 82.064 18.728C81.7227 19.2187 81.2853 19.6107 80.752 19.904C80.2187 20.2027 79.5573 20.3867 78.768 20.456L78.536 19.112C79.1067 19.0213 79.56 18.888 79.896 18.712C80.2373 18.5413 80.5067 18.3147 80.704 18.032C80.9067 17.7547 81.0853 17.4107 81.24 17H80.632L77.784 8.552H79.688L81.816 15.752L83.976 8.552H85.816Z" class="css-1ovw312"></path></g></svg></div></a></div><style data-emotion-css="v4uozr">.css-v4uozr{box-sizing:border-box;margin:0;min-width:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}@media screen and (min-width:40em){.css-v4uozr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media screen and (min-width:52em){.css-v4uozr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media screen and (min-width:64em){.css-v4uozr{display:none;}}</style><div class="css-v4uozr"><style data-emotion-css="12t40ei">.css-12t40ei{box-sizing:border-box;margin:0;min-width:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:4px;width:32px;height:32px;color:inherit;background-color:transparent;border:none;border-radius:4px;cursor:pointer;border-radius:0;background-color:var(--theme-ui-colors-background,#1d2224);}.css-12t40ei:focus{outline:none;-webkit-transition:.2s linear box-shadow;transition:.2s linear box-shadow;box-shadow:0 0 0 2px var(--theme-ui-colors-muted,#8b87ea);}</style><button title="Menu" aria-label="Toggle Menu" class="css-12t40ei"><style data-emotion-css="ipc245">.css-ipc245{box-sizing:border-box;margin:0;min-width:0;display:block;margin:0;}</style><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 24 24" class="css-ipc245"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></header><style data-emotion-css="tqqet">.css-tqqet{box-sizing:border-box;margin:0;min-width:0;width:100%;margin-left:auto;margin-right:auto;margin:0 auto;max-width:1200px;}</style><div class="css-tqqet"><style data-emotion-css="nu69hu">.css-nu69hu{box-sizing:border-box;margin:0;min-width:0;background-color:var(--theme-ui-colors-background,#1d2224);height:100%;left:-200px;position:fixed;-webkit-transition:.3s ease-in-out left;transition:.3s ease-in-out left;width:200px;z-index:999;}@media screen and (min-width:40em){.css-nu69hu{left:-200px;}}@media screen and (min-width:52em){.css-nu69hu{left:-200px;}}@media screen and (min-width:64em){.css-nu69hu{left:0px;}}</style><div class="css-nu69hu"><style data-emotion-css="1uyo777">.css-1uyo777{box-sizing:border-box;margin:0;min-width:0;border-right:1px solid var(--theme-ui-colors-surface,#2d3831);height:100%;left:-200px;-webkit-transition:.3s ease-in-out left;transition:.3s ease-in-out left;position:relative;}@media screen and (min-width:40em){.css-1uyo777{left:-200px;}}@media screen and (min-width:52em){.css-1uyo777{left:-200px;}}@media screen and (min-width:64em){.css-1uyo777{left:0;}}</style><div class="css-1uyo777"><style data-emotion-css="1xtefx3">.css-1xtefx3{box-sizing:border-box;margin:0;min-width:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:48px;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;over-flow:hidden;padding-left:32px;padding-right:32px;}@media screen and (min-width:40em){.css-1xtefx3{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}}@media screen and (min-width:52em){.css-1xtefx3{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}}@media screen and (min-width:64em){.css-1xtefx3{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}}</style><div class="css-1xtefx3"><a href="/"><style data-emotion-css="19lo1oj">.css-19lo1oj{height:25px;overflow:hidden;}</style><div class="css-19lo1oj"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 25" width="96" height="25"><g><style data-emotion-css="1phxv3p">.css-1phxv3p{fill:var(--theme-ui-colors-success,#58e6d9);}</style><path d="M2.6,12.5c0-5.1,4.2-9.4,9.4-9.4l0,0V0.5c-3,0-5.6,1-7.8,2.9c-5,4.4-5.5,11.9-1.2,16.9l2-1.7 C3.5,17,2.6,14.8,2.6,12.5z" class="css-1phxv3p"></path><style data-emotion-css="2likdo">.css-2likdo{fill:var(--theme-ui-colors-secondary,#c39eff);}</style><path d="M12,21.9c-2.8,0-5.4-1.2-7.1-3.2l-2,1.7c0.4,0.5,0.9,0.9,1.4,1.3c5,4.3,12.6,3.6,16.8-1.5l-2-1.7 C17.4,20.6,14.8,21.9,12,21.9z" class="css-2likdo"></path><style data-emotion-css="15l7r3y">.css-15l7r3y{fill:var(--theme-ui-colors-primary,#f056c7);}</style><path d="M12,0.5v2.6c5.1,0,9.4,4.2,9.4,9.4c0,2.3-0.8,4.4-2.2,6l2,1.7c1.9-2.3,2.8-4.7,2.8-7.7 C23.9,5.9,18.6,0.5,12,0.5z" class="css-15l7r3y"></path><style data-emotion-css="1ovw312">.css-1ovw312{fill:var(--theme-ui-colors-text,#FFFFFF);}</style><path d="M13.052 14.008H10.094L9.518 16H8.102L10.736 7.72H12.464L15.104 16H13.628L13.052 14.008ZM10.382 12.934H12.758L11.576 8.8L10.382 12.934Z" class="css-1ovw312"></path></g><g><path d="M37.736 14.344H33.792L33.024 17H31.136L34.648 5.96H36.952L40.472 17H38.504L37.736 14.344ZM34.176 12.912H37.344L35.768 7.4L34.176 12.912Z" class="css-1ovw312"></path><path d="M44.272 4.96V17H42.48V5.16L44.272 4.96ZM49.864 8.552L46.448 12.328L50.224 17H48.032L44.4 12.376L47.776 8.552H49.864Z" class="css-1ovw312"></path><path d="M54.496 15.84C55.056 15.84 55.5013 15.7413 55.832 15.544C56.1627 15.3413 56.328 15.064 56.328 14.712C56.328 14.4827 56.28 14.288 56.184 14.128C56.088 13.968 55.896 13.8187 55.608 13.68C55.32 13.5413 54.8827 13.3973 54.296 13.248C53.7413 13.104 53.2533 12.9333 52.832 12.736C52.416 12.5387 52.0933 12.2827 51.864 11.968C51.6347 11.6533 51.52 11.248 51.52 10.752C51.52 10.0267 51.8213 9.44267 52.424 9C53.032 8.552 53.856 8.328 54.896 8.328C55.6053 8.328 56.224 8.42133 56.752 8.608C57.28 8.79467 57.7307 9.02667 58.104 9.304L57.352 10.432C57.0213 10.2133 56.6587 10.0347 56.264 9.896C55.8747 9.75733 55.4347 9.688 54.944 9.688C54.3733 9.688 53.9627 9.77333 53.712 9.944C53.4667 10.1147 53.344 10.3413 53.344 10.624C53.344 10.8373 53.4053 11.0133 53.528 11.152C53.656 11.2907 53.8747 11.4213 54.184 11.544C54.4933 11.6667 54.9307 11.8053 55.496 11.96C56.0453 12.1093 56.5227 12.2853 56.928 12.488C57.3387 12.6907 57.656 12.96 57.88 13.296C58.1093 13.6267 58.224 14.0587 58.224 14.592C58.224 15.2 58.048 15.6987 57.696 16.088C57.344 16.472 56.8853 16.7573 56.32 16.944C55.7547 17.1253 55.1467 17.216 54.496 17.216C53.712 17.216 53.0347 17.104 52.464 16.88C51.8933 16.6507 51.4133 16.3653 51.024 16.024L51.976 14.936C52.3067 15.2027 52.6853 15.4213 53.112 15.592C53.5387 15.7573 54 15.84 54.496 15.84Z" class="css-1ovw312"></path><path d="M62.216 4.984V9.584C62.5573 9.168 62.9547 8.856 63.408 8.648C63.8667 8.43467 64.3413 8.328 64.832 8.328C65.6267 8.328 66.2187 8.54933 66.608 8.992C66.9973 9.43467 67.192 10.0507 67.192 10.84V17H65.4V11.12C65.4 10.6133 65.304 10.2507 65.112 10.032C64.92 9.808 64.6107 9.696 64.184 9.696C63.784 9.696 63.4133 9.82667 63.072 10.088C62.7307 10.344 62.4453 10.6347 62.216 10.96V17H60.424V5.176L62.216 4.984Z" class="css-1ovw312"></path><path d="M76.88 14.928C76.88 15.264 76.9307 15.5067 77.032 15.656C77.1333 15.8053 77.296 15.9173 77.52 15.992L77.12 17.208C76.704 17.16 76.344 17.0453 76.04 16.864C75.7413 16.6827 75.5173 16.408 75.368 16.04C75.0587 16.4347 74.6667 16.7307 74.192 16.928C73.7173 17.12 73.2107 17.216 72.672 17.216C71.8133 17.216 71.136 16.976 70.64 16.496C70.144 16.0107 69.896 15.376 69.896 14.592C69.896 13.7013 70.2427 13.016 70.936 12.536C71.6293 12.056 72.6213 11.816 73.912 11.816H75.12V11.264C75.12 10.7147 74.9547 10.3227 74.624 10.088C74.2933 9.848 73.832 9.728 73.24 9.728C72.9627 9.728 72.6267 9.76533 72.232 9.84C71.8373 9.90933 71.424 10.0187 70.992 10.168L70.552 8.904C71.08 8.70667 71.5973 8.56267 72.104 8.472C72.6107 8.376 73.08 8.328 73.512 8.328C74.6427 8.328 75.4853 8.57867 76.04 9.08C76.6 9.58133 76.88 10.2747 76.88 11.16V14.928ZM73.216 15.896C73.5787 15.896 73.9333 15.8 74.28 15.608C74.6267 15.416 74.9067 15.1467 75.12 14.8V12.936H74.128C73.2853 12.936 72.6827 13.0773 72.32 13.36C71.9573 13.6373 71.776 14.0213 71.776 14.512C71.776 15.4347 72.256 15.896 73.216 15.896Z" class="css-1ovw312"></path><path d="M85.816 8.552L82.904 17.032C82.6853 17.672 82.4053 18.2373 82.064 18.728C81.7227 19.2187 81.2853 19.6107 80.752 19.904C80.2187 20.2027 79.5573 20.3867 78.768 20.456L78.536 19.112C79.1067 19.0213 79.56 18.888 79.896 18.712C80.2373 18.5413 80.5067 18.3147 80.704 18.032C80.9067 17.7547 81.0853 17.4107 81.24 17H80.632L77.784 8.552H79.688L81.816 15.752L83.976 8.552H85.816Z" class="css-1ovw312"></path></g></svg></div></a></div><style data-emotion-css="9vkrg4">.css-9vkrg4{box-sizing:border-box;margin:0;min-width:0;height:100%;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;}</style><nav class="css-9vkrg4"><style data-emotion-css="dyybnr">.css-dyybnr{box-sizing:border-box;margin:0;min-width:0;list-style:none;margin-top:8px;padding:0;}</style><ul class="css-dyybnr"><style data-emotion-css="12yllt8">.css-12yllt8{box-sizing:border-box;margin:0;min-width:0;text-align:left;}@media screen and (min-width:40em){.css-12yllt8{text-align:left;}}@media screen and (min-width:52em){.css-12yllt8{text-align:left;}}@media screen and (min-width:64em){.css-12yllt8{text-align:right;}}</style><li class="css-12yllt8"><style data-emotion-css="ptwwen">.css-ptwwen{box-sizing:border-box;margin:0;min-width:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-weight:700;display:inline-block;color:var(--theme-ui-colors-muted,#8b87ea);font-weight:400;}.css-ptwwen:hover,.css-ptwwen:focus,.css-ptwwen.active{color:var(--theme-ui-colors-primary,#f056c7);}.css-ptwwen:focus{box-shadow:none;}.css-ptwwen:before{padding-right:8px;content:"-";}@media screen and (min-width:40em){.css-ptwwen:before{padding-right:8px;content:"-";}}@media screen and (min-width:52em){.css-ptwwen:before{padding-right:8px;content:"-";}}@media screen and (min-width:64em){.css-ptwwen:before{padding-right:0;content:"";}}.css-ptwwen:after{padding-left:0;content:"";}@media screen and (min-width:40em){.css-ptwwen:after{padding-left:0;content:"";}}@media screen and (min-width:52em){.css-ptwwen:after{padding-left:0;content:"";}}@media screen and (min-width:64em){.css-ptwwen:after{padding-left:8px;content:"-";}}.css-ptwwen:hover{color:var(--theme-ui-colors-text,#FFFFFF);-webkit-transition:.2s linear color;transition:.2s linear color;}.css-ptwwen[aria-current="page"]{color:var(--theme-ui-colors-text,#FFFFFF);pointer-events:none;}</style><a class="css-ptwwen" href="/">home</a></li><li class="css-12yllt8"><a class="css-ptwwen" href="/resume/">resume</a></li><li class="css-12yllt8"><a class="css-ptwwen" href="/posts/">posts</a></li><li class="css-12yllt8"><a class="css-ptwwen" href="/projects/">projects</a></li><li class="css-12yllt8"><a class="css-ptwwen" href="/about/">about</a></li></ul></nav></div></div><style data-emotion-css="nvcgve">.css-nvcgve{box-sizing:border-box;margin:0;min-width:0;background-color:rgba(0,0,0,0.8);display:none;height:100%;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;position:fixed;-webkit-transition:.2s linear background-color;transition:.2s linear background-color;width:100%;z-index:998;}@media screen and (min-width:40em){.css-nvcgve{display:none;padding-left:32px;padding-right:32px;}}@media screen and (min-width:52em){.css-nvcgve{display:none;}}@media screen and (min-width:64em){.css-nvcgve{display:none;}}.css-nvcgve:focus{outline:none;background-color:rgba(0,0,0,0.6);}</style><div role="button" tabindex="0" class="css-nvcgve"><style data-emotion-css="12t40ei">.css-12t40ei{box-sizing:border-box;margin:0;min-width:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:4px;width:32px;height:32px;color:inherit;background-color:transparent;border:none;border-radius:4px;cursor:pointer;border-radius:0;background-color:var(--theme-ui-colors-background,#1d2224);}.css-12t40ei:focus{outline:none;-webkit-transition:.2s linear box-shadow;transition:.2s linear box-shadow;box-shadow:0 0 0 2px var(--theme-ui-colors-muted,#8b87ea);}</style><button title="Close" aria-label="Close" class="css-12t40ei"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button></div><style data-emotion-css="x8q8rd">.css-x8q8rd{box-sizing:border-box;margin:0;min-width:0;display:block;margin-left:0;padding-left:16px;padding-right:16px;padding-top:64px;padding-bottom:64px;-webkit-transition:.3s ease-in-out margin-left;transition:.3s ease-in-out margin-left;}@media screen and (min-width:40em){.css-x8q8rd{margin-left:0;padding-left:32px;padding-right:32px;}}@media screen and (min-width:52em){.css-x8q8rd{margin-left:0;}}@media screen and (min-width:64em){.css-x8q8rd{margin-left:200px;}}</style><main class="css-x8q8rd"><style data-emotion-css="ktxhrn">.css-ktxhrn{box-sizing:border-box;margin:0;min-width:0;margin-bottom:32px;}</style><div class="css-ktxhrn"></div><style data-emotion-css="ts4nmc">.css-ts4nmc{box-sizing:border-box;margin:0;min-width:0;font-family:Inconsolata,monospace;font-weight:700;line-height:1.125;font-family:Inconsolata,monospace;font-weight:700;font-size:28px;margin-top:0;margin-bottom:16px;color:var(--theme-ui-colors-primary,#f056c7);margin-bottom:32px;}.css-ts4nmc a{color:inherit;}.css-ts4nmc::before{content:'→';color:var(--theme-ui-colors-success,#58e6d9);margin-right:8px;}.css-ts4nmc::after{content:'()';color:var(--theme-ui-colors-secondary,#c39eff);margin-left:4px;}</style><h1 class="css-ts4nmc">Sending personalized email with dynamic QR from cloud function</h1><style data-emotion-css="z54kij">.css-z54kij{box-sizing:border-box;margin:0;min-width:0;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-z54kij"><style data-emotion-css="14l2yhb">.css-14l2yhb{box-sizing:border-box;margin:0;min-width:0;width:100%;}@media screen and (min-width:40em){.css-14l2yhb{width:50%;}}</style><div class="css-14l2yhb"><style data-emotion-css="haw7bj">.css-haw7bj{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-muted,#8b87ea);}</style><div class="css-haw7bj">Date published: <!-- -->22-Apr-2019</div></div><div class="css-14l2yhb"></div></div><div class="css-z54kij"><div class="css-14l2yhb"><div class="css-haw7bj">2 min read / 417 words</div></div><div class="css-14l2yhb"><style data-emotion-css="1od5vmp">.css-1od5vmp{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-muted,#8b87ea);text-align:left;}@media screen and (min-width:40em){.css-1od5vmp{text-align:right;}}</style><div class="css-1od5vmp">Author: <!-- -->Akshay Ashok</div></div></div><style data-emotion-css="15t1oa2">.css-15t1oa2{box-sizing:border-box;margin:0;min-width:0;color:gray;margin:0;margin-top:8px;margin-bottom:8px;border:0;border-bottom:1px solid;border:none;margin-top:0;margin-bottom:16px;}</style><hr class="css-15t1oa2"/><style data-emotion-css="ng03qh">.css-ng03qh{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:700;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary,#f056c7);font-size:12px;border-radius:0;border-width:1px;border-style:solid;background-color:transparent;padding:0px 4px;color:var(--theme-ui-colors-primary,#f056c7);border-color:var(--theme-ui-colors-primary,#f056c7);margin-bottom:8px;margin-right:8px;color:#f056c7;border-color:#f056c7;}</style><div class="css-ng03qh">email</div><style data-emotion-css="qor9p1">.css-qor9p1{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:700;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary,#f056c7);font-size:12px;border-radius:0;border-width:1px;border-style:solid;background-color:transparent;padding:0px 4px;color:var(--theme-ui-colors-primary,#f056c7);border-color:var(--theme-ui-colors-primary,#f056c7);margin-bottom:8px;margin-right:8px;color:#ce66d2;border-color:#ce66d2;}</style><div class="css-qor9p1">Firebase</div><style data-emotion-css="rjdyis">.css-rjdyis{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:700;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary,#f056c7);font-size:12px;border-radius:0;border-width:1px;border-style:solid;background-color:transparent;padding:0px 4px;color:var(--theme-ui-colors-primary,#f056c7);border-color:var(--theme-ui-colors-primary,#f056c7);margin-bottom:8px;margin-right:8px;color:#ac76de;border-color:#ac76de;}</style><div class="css-rjdyis">cloud functions</div><hr class="css-15t1oa2"/><style data-emotion-css="mxbuka">.css-mxbuka a{color:var(--theme-ui-colors-secondary,#c39eff);word-break:break-word;}.css-mxbuka a:focus{outline:none;-webkit-transition:.2s linear box-shadow;transition:.2s linear box-shadow;box-shadow:0 2px 0 0 var(--theme-ui-colors-primary,#f056c7);}.css-mxbuka code{color:inherit;background-color:var(--theme-ui-colors-surface,#2d3831);font-size:14px;padding:4px;word-break:break-word;}.css-mxbuka code .changed{color:rgb(162,191,252);font-style:italic;}.css-mxbuka code .deleted{color:rgba(239,83,80,0.56);font-style:italic;}.css-mxbuka code .inserted,.css-mxbuka code .attr-name{color:rgb(173,219,103);font-style:italic;}.css-mxbuka code .comment{color:rgb(99,119,119);font-style:italic;}.css-mxbuka code .string,.css-mxbuka code .url{color:rgb(173,219,103);}.css-mxbuka code .variable{color:rgb(214,222,235);}.css-mxbuka code .number{color:rgb(247,140,108);}.css-mxbuka code .builtin,.css-mxbuka code .char,.css-mxbuka code .constant,.css-mxbuka code .function{color:rgb(130,170,255);}.css-mxbuka code .punctuation{color:rgb(199,146,234);}.css-mxbuka code .selector,.css-mxbuka code .doctype{color:rgb(199,146,234);font-style:italic;}.css-mxbuka code .class-name{color:rgb(255,203,139);}.css-mxbuka code .tag,.css-mxbuka code .operator,.css-mxbuka code .keyword{color:rgb(127,219,202);}.css-mxbuka code .boolean{color:rgb(255,88,116);}.css-mxbuka code .property{color:rgb(128,203,196);}.css-mxbuka code .namespace{color:rgb(178,204,214);}</style><p class="css-mxbuka">This is the second part of the series named Building formiQR.</p><p class="css-mxbuka">By following the previous article, you may have a similar structure of Realtime Database,as</p><p class="css-mxbuka"><style data-emotion-css="13eqmm2">.css-13eqmm2{max-width:100%;max-height:calc(50vh + 180px);border-radius:3px;}</style><img src="https://res.cloudinary.com/akshay090/image/upload/v1597567353/Portfolio_Assets/firebase1_llkvea.png" alt="Firebase structure" class="css-13eqmm2"/></p><p class="css-mxbuka">Note: You would not be having the atEvent and count node, as we would be writing code for them in other sections of the blog series.</p><p class="css-mxbuka">So looking at our maker node or let say registered users, we have their name and email id. Now we need to set a cloud function, which would be able to get the name and email, at on create trigger on the node and send personalized email to them.</p><p class="css-mxbuka">A small brief about firebase cloud function, if you are new to it, Cloud Functions for Firebase lets you automatically run backend code in response to events triggered by Firebase features.</p><p class="css-mxbuka">Here is a <style data-emotion-css="f82a9k">.css-f82a9k{color:var(--theme-ui-colors-secondary,#c39eff);}.css-f82a9k:focus{outline:none;-webkit-transition:.2s linear box-shadow;transition:.2s linear box-shadow;box-shadow:0 2px 0 0 var(--theme-ui-colors-primary,#f056c7);}.css-f82a9k button{cursor:pointer;}</style><a href="https://firebase.google.com/docs/functions/get-started" class="css-f82a9k">post to get started</a> with firebase cloud functions, you can follow it upto step 4 and then we need to add the following code to the index.js</p><style data-emotion-css="7u7fbj">.css-7u7fbj{color:#F8F8F2;background-color:#282A36;font-size:13px;padding:16px;border-radius:0;overflow:auto;}.css-7u7fbj .changed{color:rgb(255,184,108);}.css-7u7fbj .deleted{color:rgb(255,85,85);}.css-7u7fbj .inserted,.css-7u7fbj .attr-name{color:rgb(173,219,103);font-style:italic;}.css-7u7fbj .comment{color:rgb(98,114,164);}.css-7u7fbj .string,.css-7u7fbj .url{color:rgb(173,219,103);}.css-7u7fbj .variable{color:rgb(214,222,235);}.css-7u7fbj .number{color:rgb(247,140,108);}.css-7u7fbj .builtin,.css-7u7fbj .char,.css-7u7fbj .constant,.css-7u7fbj .function{color:rgb(130,170,255);}.css-7u7fbj .punctuation{color:rgb(199,146,234);}.css-7u7fbj .selector,.css-7u7fbj .doctype{color:rgb(199,146,234);font-style:italic;}.css-7u7fbj .class-name{color:rgb(255,203,139);}.css-7u7fbj .tag,.css-7u7fbj .operator,.css-7u7fbj .keyword{color:rgb(127,219,202);}.css-7u7fbj .boolean{color:rgb(255,88,116);}.css-7u7fbj .property{color:rgb(128,203,196);}.css-7u7fbj .namespace{color:rgb(178,204,214);}.css-7u7fbj .prolog,.css-7u7fbj .constant,.css-7u7fbj .builtin{color:rgb(189,147,249);}.css-7u7fbj .inserted,.css-7u7fbj .function{color:rgb(80,250,123);}.css-7u7fbj .punctuation,.css-7u7fbj .symbol{color:rgb(248,248,242);}.css-7u7fbj .string,.css-7u7fbj .char,.css-7u7fbj .tag,.css-7u7fbj .selector{color:rgb(255,121,198);}.css-7u7fbj .keyword,.css-7u7fbj .variable{color:rgb(189,147,249);font-style:italic;}.css-7u7fbj .attr-name{color:rgb(241,250,140);}</style><pre class="language-js prism-code language-javascript css-7u7fbj"><div class="token-line"><style data-emotion-css="1baulvz">.css-1baulvz{display:inline-block;}</style><span class="token comment css-1baulvz">//index.js</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> functions </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> </span><span class="token function css-1baulvz">require</span><span class="token punctuation css-1baulvz">(</span><span class="token string css-1baulvz">&quot;firebase-functions&quot;</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> nodemailer </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> </span><span class="token function css-1baulvz">require</span><span class="token punctuation css-1baulvz">(</span><span class="token string css-1baulvz">&quot;nodemailer&quot;</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> fs </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> </span><span class="token function css-1baulvz">require</span><span class="token punctuation css-1baulvz">(</span><span class="token string css-1baulvz">&quot;fs&quot;</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> path </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> </span><span class="token function css-1baulvz">require</span><span class="token punctuation css-1baulvz">(</span><span class="token string css-1baulvz">&quot;path&quot;</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token comment css-1baulvz">// The Firebase Admin SDK to access the Firebase Realtime Database.</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> admin </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> </span><span class="token function css-1baulvz">require</span><span class="token punctuation css-1baulvz">(</span><span class="token string css-1baulvz">&quot;firebase-admin&quot;</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">admin</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">initializeApp</span><span class="token punctuation css-1baulvz">(</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> gmailEmail </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> functions</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">config</span><span class="token punctuation css-1baulvz">(</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">gmail</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">email</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> gmailPassword </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> functions</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">config</span><span class="token punctuation css-1baulvz">(</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">gmail</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">password</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> mailTransport </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> nodemailer</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">createTransport</span><span class="token punctuation css-1baulvz">(</span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  service</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;gmail&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  auth</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    user</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> gmailEmail</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    pass</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> gmailPassword</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">}</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token punctuation css-1baulvz">}</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">exports</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">mailFxn</span><span class="token plain css-1baulvz"> </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> functions</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">database</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">ref</span><span class="token punctuation css-1baulvz">(</span><span class="token string css-1baulvz">&quot;/maker/{id}&quot;</span><span class="token punctuation css-1baulvz">)</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">onCreate</span><span class="token punctuation css-1baulvz">(</span><span class="token punctuation css-1baulvz">(</span><span class="token parameter css-1baulvz">snapshot</span><span class="token parameter punctuation css-1baulvz">,</span><span class="token parameter css-1baulvz"> context</span><span class="token punctuation css-1baulvz">)</span><span class="token plain css-1baulvz"> </span><span class="token arrow operator css-1baulvz">=&gt;</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token comment css-1baulvz">// Grab the current value of what was written to the Realtime Database.</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> makers </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> snapshot</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">val</span><span class="token punctuation css-1baulvz">(</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token console class-name css-1baulvz">console</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">log</span><span class="token punctuation css-1baulvz">(</span><span class="token plain css-1baulvz">makers</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">name</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token console class-name css-1baulvz">console</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">log</span><span class="token punctuation css-1baulvz">(</span><span class="token plain css-1baulvz">makers</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">email</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token keyword css-1baulvz">const</span><span class="token plain css-1baulvz"> makerID </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> context</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">params</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">id</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token comment css-1baulvz">//firebase functions:config:set gmail.email=myemailID@gmail.com gmail.password=Mypassword</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token comment css-1baulvz">//To set email and password</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token comment css-1baulvz">//To view the set email and pass firebase functions:config:get</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token function css-1baulvz">sendEmail</span><span class="token punctuation css-1baulvz">(</span><span class="token plain css-1baulvz">makers</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> makerID</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token keyword css-1baulvz">return</span><span class="token plain css-1baulvz"> </span><span class="token keyword null nil css-1baulvz">null</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">}</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token keyword css-1baulvz">function</span><span class="token plain css-1baulvz"> </span><span class="token function css-1baulvz">sendEmail</span><span class="token punctuation css-1baulvz">(</span><span class="token parameter css-1baulvz">makers</span><span class="token parameter punctuation css-1baulvz">,</span><span class="token parameter css-1baulvz"> makerID</span><span class="token punctuation css-1baulvz">)</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token comment css-1baulvz">//http://www.google.com/accounts/DisplayUnlockCaptcha</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token comment css-1baulvz">//https://myaccount.google.com/lesssecureapps</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token comment css-1baulvz">//This link is important to enable accesses to google account</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token keyword css-1baulvz">var</span><span class="token plain css-1baulvz"> </span><span class="token constant css-1baulvz">UNIQUE_NAME</span><span class="token plain css-1baulvz"> </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> makers</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">name</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token comment css-1baulvz">// var UNIQUE_ID = makerID;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token keyword css-1baulvz">var</span><span class="token plain css-1baulvz"> </span><span class="token constant css-1baulvz">UNIQUE_QR</span><span class="token plain css-1baulvz"> </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> </span><span class="token template-string template-punctuation string css-1baulvz">`</span><span class="token template-string string css-1baulvz">https://chart.googleapis.com/chart?chs=150x150&amp;cht=qr&amp;chl=</span><span class="token template-string interpolation interpolation-punctuation punctuation css-1baulvz">${</span><span class="token template-string interpolation css-1baulvz"></span></div><div class="token-line"><span class="token template-string interpolation css-1baulvz">    </span><span class="token template-string interpolation operator css-1baulvz">+</span><span class="token template-string interpolation css-1baulvz">makerID </span><span class="token template-string interpolation operator css-1baulvz">+</span><span class="token template-string interpolation css-1baulvz"> </span><span class="token template-string interpolation number css-1baulvz">1000</span><span class="token template-string interpolation css-1baulvz"></span></div><div class="token-line"><span class="token template-string interpolation css-1baulvz">  </span><span class="token template-string interpolation interpolation-punctuation punctuation css-1baulvz">}</span><span class="token template-string template-punctuation string css-1baulvz">`</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token keyword css-1baulvz">var</span><span class="token plain css-1baulvz"> filePath </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> path</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">join</span><span class="token punctuation css-1baulvz">(</span><span class="token plain css-1baulvz">__dirname</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;templates/makerEmail.html&quot;</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  fs</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">readFile</span><span class="token punctuation css-1baulvz">(</span><span class="token plain css-1baulvz">filePath</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"> encoding</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;utf-8&quot;</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">}</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token keyword css-1baulvz">function</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">(</span><span class="token parameter css-1baulvz">err</span><span class="token parameter punctuation css-1baulvz">,</span><span class="token parameter css-1baulvz"> data</span><span class="token punctuation css-1baulvz">)</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    data </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> data</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">toString</span><span class="token punctuation css-1baulvz">(</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    data </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> data</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">replace</span><span class="token punctuation css-1baulvz">(</span><span class="token regex css-1baulvz">/##UNIQUE_NAME/g</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token constant css-1baulvz">UNIQUE_NAME</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token comment css-1baulvz">// data = data.replace(/##UNIQUE_ID/g, UNIQUE_ID);</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    data </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> data</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">replace</span><span class="token punctuation css-1baulvz">(</span><span class="token regex css-1baulvz">/##UNIQUE_QR/g</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token constant css-1baulvz">UNIQUE_QR</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token keyword css-1baulvz">var</span><span class="token plain css-1baulvz"> mailOptions </span><span class="token operator css-1baulvz">=</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token keyword module css-1baulvz">from</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&#x27;&quot;MakerEvent&quot; &lt;noreply@firebase.com&gt;&#x27;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token comment css-1baulvz">// sender address</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      to</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> makers</span><span class="token punctuation css-1baulvz">.</span><span class="token property-access css-1baulvz">email</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token comment css-1baulvz">// list of receivers</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      subject</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;Thank You For Registration&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token comment css-1baulvz">// Subject line</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      html</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> data</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> </span><span class="token comment css-1baulvz">// html body</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token punctuation css-1baulvz">}</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token keyword css-1baulvz">try</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      mailTransport</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">sendMail</span><span class="token punctuation css-1baulvz">(</span><span class="token plain css-1baulvz">mailOptions</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token punctuation css-1baulvz">}</span><span class="token plain css-1baulvz"> </span><span class="token keyword css-1baulvz">catch</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">(</span><span class="token plain css-1baulvz">error</span><span class="token punctuation css-1baulvz">)</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token console class-name css-1baulvz">console</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">error</span><span class="token punctuation css-1baulvz">(</span><span class="token string css-1baulvz">&quot;There was an error while sending the email:&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> error</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token comment css-1baulvz">// errorEmails = functions.database.ref(`/emailError/${makerID}`).set({</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token comment css-1baulvz">//   email: makers.email</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token comment css-1baulvz">// })</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token punctuation css-1baulvz">}</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token keyword css-1baulvz">return</span><span class="token plain css-1baulvz"> </span><span class="token console class-name css-1baulvz">console</span><span class="token punctuation css-1baulvz">.</span><span class="token method function property-access css-1baulvz">log</span><span class="token punctuation css-1baulvz">(</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token template-string template-punctuation string css-1baulvz">`</span><span class="token template-string string css-1baulvz">Sending mail to </span><span class="token template-string interpolation interpolation-punctuation punctuation css-1baulvz">${</span><span class="token template-string interpolation css-1baulvz">makers</span><span class="token template-string interpolation punctuation css-1baulvz">.</span><span class="token template-string interpolation css-1baulvz">name</span><span class="token template-string interpolation interpolation-punctuation punctuation css-1baulvz">}</span><span class="token template-string string css-1baulvz"> with stamp </span><span class="token template-string interpolation interpolation-punctuation punctuation css-1baulvz">${</span><span class="token template-string interpolation css-1baulvz">makers</span><span class="token template-string interpolation punctuation css-1baulvz">.</span><span class="token template-string interpolation css-1baulvz">stamp</span><span class="token template-string interpolation interpolation-punctuation punctuation css-1baulvz">}</span><span class="token template-string template-punctuation string css-1baulvz">`</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">}</span><span class="token punctuation css-1baulvz">)</span><span class="token punctuation css-1baulvz">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token punctuation css-1baulvz">}</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token comment css-1baulvz">//To deploy firebase deploy --only functions:mailFxn</span></div></pre><p class="css-mxbuka">You can go through the code, its very straightforward to understand, and the important details are in the comment section.</p><p class="css-mxbuka">Before we proceed further, we need to make an email template, which we would be using to send personalized emails to our event attendees.</p><p class="css-mxbuka">To generate an awesome email template, you can use <a href="https://stripo.email" class="css-f82a9k">https://stripo.email</a> this is by far the best website I found to make email templates. PS: I am not sponsored by stripo, it&#x27;s just that they are really awesome.</p><p class="css-mxbuka">After designing your email template, export it as HTML and add it under functions/templates/makerEmail.html</p><p class="css-mxbuka">Don&#x27;t forget to add tags, which we would be replacing dynamically, like ##UNIQUE_NAME or ##UNIQUE_QR.</p><p class="css-mxbuka">This method of using data.replace(/##UNIQUE_NAME/g, &quot;MyNameHere&quot;); is the most easiest method I found to generate personalized emails.</p><p class="css-mxbuka">Finally we can deploy this cloud function, for that run <code class="css-0">firebase deploy --only functions:mailFxn</code></p><p class="css-mxbuka">Now when ever a node is created, the cloud function would automatically send them the personalized emails. Wait, how to send email to the ones already present in firebase realtime database,before we added this cloud function.</p><p class="css-mxbuka">For that delete the nodes for the one already present, before adding the cloud function and press the SYNC button in the google sheet which we added at the end of previous article. That would recreate the onCreate Trigger and the cloud function would do the work.</p><p class="css-mxbuka">So finally its over, see you in the <a href="/posts/formiqr-part3-counter-cloud-function" class="css-f82a9k">next post</a> where we will discuss how to add a counter cloud function to keep track of attendees count.</p></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/formiqr-part2-email-cloud-function/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9b6a3315453a0666a03f.js"],"app":["/app-18a21ce20bb33c517fa8.js"],"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js":["/component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js-83fe16a84aa019894e6a.js"],"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-pages-404-js":["/component---node-modules-pauliescanlon-gatsby-theme-terminal-src-pages-404-js-e1c128de38abda57adcc.js"],"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-pages-dummy-page-mdx":["/component---node-modules-pauliescanlon-gatsby-theme-terminal-src-pages-dummy-page-mdx-999d14e0392d60b8e4b2.js"],"component---src-pages-about-mdx":["/component---src-pages-about-mdx-d98d25e6b3c150d1ba68.js"],"component---src-pages-index-mdx":["/component---src-pages-index-mdx-ee4507cd079b733aa990.js"],"component---src-pages-posts-mdx":["/component---src-pages-posts-mdx-f6dfa5e30930e8cdcc77.js"],"component---src-pages-projects-mdx":["/component---src-pages-projects-mdx-7878f67eb9fffe8e1f81.js"],"component---src-pages-resume-mdx":["/component---src-pages-resume-mdx-a7330b857048aabdcc85.js"]};/*]]>*/</script><script src="/polyfill-9b6a3315453a0666a03f.js" nomodule=""></script><script src="/component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js-83fe16a84aa019894e6a.js" async=""></script><script src="/681fe5fc8c357cbae480dae1928d6d5b271c5b15-8e275088e2da301790d2.js" async=""></script><script src="/app-18a21ce20bb33c517fa8.js" async=""></script><script src="/2b7b2d2a-7b40e02f09460fb8e527.js" async=""></script><script src="/styles-e0de8ac04609cf01adef.js" async=""></script><script src="/framework-376edee25eb5f5cd8260.js" async=""></script><script src="/webpack-runtime-32da1d79b040c17693e3.js" async=""></script></body></html>